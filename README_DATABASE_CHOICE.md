# ุฏููู ุงุณุชุฎุฏุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฑูุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทููุฑ ูุธุงู ูุฑู ูุฏุนู ููุง ุงูููุนูู ูู ููุงุนุฏ ุงูุจูุงูุงุช (SQLite ู PostgreSQL) ูุน ุฅููุงููุฉ ุงูุชุจุฏูู ุจููููุง ุจุณูููุฉ ุนุจุฑ ูุชุบูุฑ ุงูุจูุฆุฉ.

## ๐ฏ ุงููููุฒุงุช

### โ **ุงููุฑููุฉ ุงููุงููุฉ:**
- ุฏุนู SQLite ู PostgreSQL
- ุชุจุฏูู ุณูู ุจูู ุงูููุนูู
- ูุง ุญุงุฌุฉ ูููู ุงูุจูุงูุงุช
- ูู ููุน ูุนูู ุจุดูู ูุณุชูู

### โ **ุณูููุฉ ุงูุงุณุชุฎุฏุงู:**
- ุชุญุฏูุฏ ุงูููุน ุนุจุฑ ูุชุบูุฑ ุงูุจูุฆุฉ
- ุชุดุบูู ููุฑู ุจุฏูู ุฅุนุฏุงุฏุงุช ูุนูุฏุฉ
- ุนูุฏุฉ ุชููุงุฆูุฉ ุฅูู SQLite ุนูุฏ ูุดู PostgreSQL

### โ **ุงูุชูุงูู ุงููุงูู:**
- ููุณ ุงููุงุฌูุฉ ุงูุจุฑูุฌูุฉ ูููุง ุงูููุนูู
- ุฌููุน ุงูุฏูุงู ูุชูุงููุฉ
- ูุง ุญุงุฌุฉ ูุชุนุฏูู ุงูููุฏ

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. **ุฅุนุฏุงุฏ ููู .env**

#### ูุงุณุชุฎุฏุงู SQLite (ุงูุชุฑุงุถู):
```env
# ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_TYPE=sqlite

# ุฅุนุฏุงุฏุงุช ุงูุจูุช
BOT_TOKEN=your_bot_token_here
API_ID=your_api_id_here
API_HASH=your_api_hash_here
```

#### ูุงุณุชุฎุฏุงู PostgreSQL:
```env
# ููุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_TYPE=postgresql

# ุฑุงุจุท ูุงุนุฏุฉ ุงูุจูุงูุงุช
DATABASE_URL=postgresql://telegram_bot_user:your_secure_password@localhost:5432/telegram_bot_db

# ุฅุนุฏุงุฏุงุช ุงูุจูุช
BOT_TOKEN=your_bot_token_here
API_ID=your_api_id_here
API_HASH=your_api_hash_here
```

### 2. **ุชุดุบูู ุงูุจูุช**

#### ุงูุทุฑููุฉ ุงูุนุงุฏูุฉ:
```bash
python run.py
```

#### ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ ูุน ุฎูุงุฑุงุช:
```bash
# ุชุดุบูู ูุน SQLite
python run_with_database_choice.py --database sqlite

# ุชุดุบูู ูุน PostgreSQL
python run_with_database_choice.py --database postgresql

# ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ููุท
python run_with_database_choice.py --test

# ุนุฑุถ ูุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
python run_with_database_choice.py --info
```

### 3. **ุงุณุชุฎุฏุงู ูู ุงูููุฏ**

#### ุงูุทุฑููุฉ ุงููุฏููุฉ:
```python
from database.database import Database
db = Database()
```

#### ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ:
```python
from database import get_database
db = get_database()
```

#### ุฃู ุงุณุชุฎุฏุงู ุงููุตูุน ูุจุงุดุฑุฉ:
```python
from database import DatabaseFactory
db = DatabaseFactory.create_database()
```

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. **`database/database_factory.py`**
- **ุงููุตู:** ูุตูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณู
- **ุงููููุฒุงุช:**
  - ุงุฎุชูุงุฑ ุงูููุน ุญุณุจ ูุชุบูุฑ ุงูุจูุฆุฉ
  - ุนูุฏุฉ ุชููุงุฆูุฉ ุฅูู SQLite ุนูุฏ ุงููุดู
  - ูุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู

### 2. **`database/__init__.py`**
- **ุงููุตู:** ูุงุฌูุฉ ููุญุฏุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช
- **ุงููููุฒุงุช:**
  - ุฏุงูุฉ `get_database()` ููุงุณุชุฎุฏุงู ุงูุณุฑูุน
  - ุชุตุฏูุฑ `DatabaseFactory` ููุงุณุชุฎุฏุงู ุงููุชูุฏู

### 3. **`run_with_database_choice.py`**
- **ุงููุตู:** ุณูุฑูุจุช ุชุดุบูู ูุญุณู
- **ุงููููุฒุงุช:**
  - ุฎูุงุฑุงุช ุณุทุฑ ุงูุฃูุงูุฑ
  - ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
  - ุนุฑุถ ุงููุนูููุงุช
  - ุชุญููู ุงูุฅุนุฏุงุฏุงุช

### 4. **`.env.example`**
- **ุงููุตู:** ููู ูุซุงู ููุฅุนุฏุงุฏุงุช
- **ุงููููุฒุงุช:**
  - ุฅุนุฏุงุฏุงุช SQLite ู PostgreSQL
  - ุชุนูููุงุช ุชูุถูุญูุฉ
  - ูุชุบูุฑุงุช ูุทููุจุฉ

## ๐ง ุงูุชุนุฏููุงุช ุงููุทููุจุฉ

### 1. **ุชุญุฏูุซ ุงุณุชูุฑุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช:**

#### ูู `bot_package/bot_simple.py`:
```python
# ุชุบููุฑ ูู:
from database.database import Database

# ุฅูู:
from database import get_database
```

#### ูู `userbot_service/userbot.py`:
```python
# ุชุบููุฑ ูู:
from database.database import Database

# ุฅูู:
from database import get_database
```

### 2. **ุชุญุฏูุซ ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช:**

#### ูู `SimpleTelegramBot.__init__()`:
```python
# ุชุบููุฑ ูู:
self.db = Database()

# ุฅูู:
self.db = get_database()
```

#### ูู `UserbotService.__init__()`:
```python
# ุชุบููุฑ ูู:
self.db = Database()

# ุฅูู:
self.db = get_database()
```

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. **ุงุฎุชุจุงุฑ ุงููุตูุน:**
```bash
python test_database_factory.py
```

### 2. **ุงุฎุชุจุงุฑ ุงูุงุชุตุงู:**
```bash
python run_with_database_choice.py --test
```

### 3. **ุงุฎุชุจุงุฑ ุงูุชุดุบูู:**
```bash
# ุงุฎุชุจุงุฑ SQLite
DATABASE_TYPE=sqlite python run_with_database_choice.py

# ุงุฎุชุจุงุฑ PostgreSQL
DATABASE_TYPE=postgresql python run_with_database_choice.py
```

## ๐ ููุงุฑูุฉ ุงูุฃุฏุงุก

### SQLite:
- โ **ุณูููุฉ ุงูุงุณุชุฎุฏุงู:** ููู ูุงุญุฏ
- โ **ุณุฑุนุฉ ุงูุชุดุบูู:** ููุฑู
- โ **ูุง ุญุงุฌุฉ ูุฅุนุฏุงุฏ:** ุฌุงูุฒ ููุงุณุชุฎุฏุงู
- โ๏ธ **ูุญุฏูุฏูุฉ ุงูุชุฒุงูู:** ูููุณุชุฎุฏููู ุงููููููู

### PostgreSQL:
- โ **ุฃุฏุงุก ุนุงูู:** ููุงุณุชุฎุฏุงูุงุช ุงููุจูุฑุฉ
- โ **ุชุฒุงูู ูุชูุฏู:** ูููุณุชุฎุฏููู ุงููุชุนุฏุฏูู
- โ **ุฃูุงู ุนุงูู:** ุฅุฏุงุฑุฉ ุตูุงุญูุงุช ูุชูุฏูุฉ
- โ๏ธ **ุญุงุฌุฉ ูุฅุนุฏุงุฏ:** ุชุซุจูุช ูุชูููู

## ๐ ุงูุชุจุฏูู ุจูู ุงูููุนูู

### ูู SQLite ุฅูู PostgreSQL:
1. ุชุซุจูุช PostgreSQL
2. ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุญุฏูุซ ููู `.env`:
   ```env
   DATABASE_TYPE=postgresql
   DATABASE_URL=postgresql://user:pass@localhost:5432/db
   ```
4. ุชุดุบูู ุงูุจูุช

### ูู PostgreSQL ุฅูู SQLite:
1. ุชุญุฏูุซ ููู `.env`:
   ```env
   DATABASE_TYPE=sqlite
   ```
2. ุชุดุบูู ุงูุจูุช

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. **ุงูุจูุงูุงุช ุงููููุตูุฉ:**
- ูู ููุน ูุงุนุฏุฉ ุจูุงูุงุช ูู ุจูุงูุงุชู ุงูุฎุงุตุฉ
- ูุง ูุชู ููู ุงูุจูุงูุงุช ุชููุงุฆูุงู
- ูููู ุงุณุชุฎุฏุงู ููุง ุงูููุนูู ูู ููุณ ุงูููุช

### 2. **ุงูุฃุฏุงุก:**
- SQLite ููุงุณุจ ูููุณุชุฎุฏููู ุงููููููู
- PostgreSQL ููุงุณุจ ูููุณุชุฎุฏููู ุงููุชุนุฏุฏูู
- ุงุฎุชุฑ ุงูููุน ุญุณุจ ุงุญุชูุงุฌุงุชู

### 3. **ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ:**
- ุงุญุชูุธ ุจูุณุฎ ุงุญุชูุงุทูุฉ ูู ููุง ุงูููุนูู
- SQLite: ูุณุฎ ููู `telegram_bot.db`
- PostgreSQL: ุงุณุชุฎุฏุงู ุฃุฏูุงุช ุงููุณุฎ ุงูุงุญุชูุงุทู

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุชุดุบูู ุณุฑูุน ูุน SQLite
```bash
# ุฅูุดุงุก ููู .env
echo "DATABASE_TYPE=sqlite" > .env
echo "BOT_TOKEN=your_token" >> .env
echo "API_ID=your_api_id" >> .env
echo "API_HASH=your_api_hash" >> .env

# ุชุดุบูู ุงูุจูุช
python run.py
```

### ูุซุงู 2: ุชุดุบูู ูุน PostgreSQL
```bash
# ุฅูุดุงุก ููู .env
echo "DATABASE_TYPE=postgresql" > .env
echo "DATABASE_URL=postgresql://user:pass@localhost:5432/db" >> .env
echo "BOT_TOKEN=your_token" >> .env
echo "API_ID=your_api_id" >> .env
echo "API_HASH=your_api_hash" >> .env

# ุชุดุบูู ุงูุจูุช
python run_with_database_choice.py --database postgresql
```

### ูุซุงู 3: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
```bash
# ุงุฎุชุจุงุฑ SQLite
python run_with_database_choice.py --database sqlite --test

# ุงุฎุชุจุงุฑ PostgreSQL
python run_with_database_choice.py --database postgresql --test
```

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุจุนุฏ ุชุทุจูู ูุฐุง ุงููุธุงู ุณุชุญุตู ุนูู:

- โ **ูุฑููุฉ ูุงููุฉ** ูู ุงุฎุชูุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ **ุณูููุฉ ุงูุงุณุชุฎุฏุงู** ุจุฏูู ุชุนููุฏุงุช
- โ **ุชูุงูู ูุงูู** ูุน ุงูููุฏ ุงูููุฌูุฏ
- โ **ุฃุฏุงุก ูุญุณู** ุญุณุจ ุงูุงุญุชูุงุฌุงุช
- โ **ูุงุจููุฉ ุงูุชูุณุน** ูููุณุชูุจู

**๐ ุงูุจูุช ุฌุงูุฒ ููุนูู ูุน ููุง ุงูููุนูู ูู ููุงุนุฏ ุงูุจูุงูุงุช!** ๐๏ธ