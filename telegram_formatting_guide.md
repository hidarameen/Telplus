# دليل تنسيق النصوص في تليجرام

## HTML تليجرام المدعوم

### أنماط التنسيق الأساسية
```html
<!-- النص العادي -->
النص

<!-- النص العريض -->
<b>النص العريض</b>

<!-- النص المائل -->
<i>النص المائل</i>

<!-- النص تحت خط -->
<u>النص تحت خط</u>

<!-- النص المشطوب -->
<s>النص المشطوب</s>

<!-- الكود المضمن -->
<code>الكود</code>

<!-- كتلة الكود -->
<pre>كتلة الكود</pre>

<!-- الاقتباس -->
<blockquote>النص المقتبس</blockquote>

<!-- النص المخفي -->
<tg-spoiler>النص المخفي</tg-spoiler>
```

### الروابط التشعبية
```html
<!-- رابط عادي -->
<a href="https://example.com">نص الرابط</a>

<!-- ذكر مستخدم -->
<a href="tg://user?id=123456789">@username</a>
```

## الإعدادات المطلوبة

### parse_mode
يجب استخدام `parse_mode='HTML'` عند إرسال الرسائل عبر Bot API:

```python
await context.bot.send_message(
    chat_id=chat_id,
    text=formatted_text,
    parse_mode='HTML'
)
```

## ملاحظات مهمة

1. **لا تستخدم Markdown**: تليجرام يتطلب HTML للتنسيق المتقدم
2. **تنظيف النصوص**: قم بإزالة أي تنسيق markdown موجود قبل تطبيق HTML
3. **التداخل**: يمكن تداخل بعض العلامات مثل `<b><i>النص</i></b>`
4. **الحروف الخاصة**: استخدم HTML entities للحروف الخاصة إذا لزم الأمر

## الاختبار

لاختبار التنسيقات:
```bash
python test_all_formats.py
```

## التحديثات الأخيرة

- ✅ تم تحويل جميع أنماط التنسيق من markdown إلى HTML
- ✅ تم إصلاح parse_mode ليستخدم 'HTML'
- ✅ تم تطبيق التنسيق الصحيح لـ spoiler باستخدام `<span class="tg-spoiler">`
- ✅ تم اختبار جميع أنماط التنسيق والتأكد من عملها