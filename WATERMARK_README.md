# ุฏููู ุงุณุชุฎุฏุงู ูุธููุฉ ุงูุนูุงูุฉ ุงููุงุฆูุฉ ุงูููุตูุญุฉ

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุตูุงุญ ูุชุญุณูู ูุธููุฉ ุงูุนูุงูุฉ ุงููุงุฆูุฉ ูู ุงูุจูุช ูุญู ุฌููุน ุงููุดุงูู ุงููุฐููุฑุฉ:

1. โ **ุฅุตูุงุญ ุนุฏู ุชุทุจูู ุงูุนูุงูุฉ ุงููุงุฆูุฉ ุนูู ุงูุตูุฑ**
2. โ **ุฅุตูุงุญ ุฃุฒุฑุงุฑ ููุญุฉ ุงูุชุญูู**
3. โ **ุญู ูุดููุฉ ูุนุงููุฉ ุงูููุฏูู**
4. โ **ุชุญุณูู ุถุบุท ุงูููุฏูู ูุชูููู ุงูุญุฌู**

## ุงูุชุซุจูุช ูุงูุฅุนุฏุงุฏ

### 1. ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

```bash
# ุชุซุจูุช FFmpeg (ูุทููุจ ูุชุญุณูู ุงูููุฏูู)
sudo apt update
sudo apt install ffmpeg

# ุชุซุจูุช ุงูููุชุจุงุช ุงููุทููุจุฉ
pip install opencv-python pillow numpy
```

### 2. ุชุญุฏูุซ ุงููููุงุช

```bash
# ุงููุณุฎ ุงูุงุญุชูุงุทู
cp watermark_processor.py watermark_processor_backup.py

# ุงูุชุญุฏูุซุงุช ุชู ุชุทุจูููุง ุจุงููุนู
```

### 3. ุงุฎุชุจุงุฑ ุงููุธุงุฆู

```bash
# ุชุดุบูู ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ
python3 test_watermark.py
```

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฅุนุฏุงุฏุงุช ุงูุนูุงูุฉ ุงููุงุฆูุฉ

#### ุชูุนูู ุงูุนูุงูุฉ ุงููุงุฆูุฉ
1. ุงุฐูุจ ุฅูู ุฅุนุฏุงุฏุงุช ุงููููุฉ
2. ุงุฎุชุฑ "๐ท๏ธ ุงูุนูุงูุฉ ุงููุงุฆูุฉ"
3. ุงุถุบุท ุนูู "โ ุชูุนูู"

#### ุฅุนุฏุงุฏุงุช ุงููุต
1. ุงุฎุชุฑ "๐ญ ููุน ุงูุนูุงูุฉ" โ "๐ ูุต"
2. ุฃุฏุฎู ุงููุต ุงููุทููุจ
3. ุงุถุจุท ุงูุญุฌู ูุงูุดูุงููุฉ ูุงูููู

#### ุฅุนุฏุงุฏุงุช ุงูุตูุฑุฉ
1. ุงุฎุชุฑ "๐ญ ููุน ุงูุนูุงูุฉ" โ "๐ผ๏ธ ุตูุฑุฉ"
2. ุฃุฑุณู ุงูุตูุฑุฉ ุงููุทููุจุฉ
3. ุงุถุจุท ุงูุญุฌู ูุงูุดูุงููุฉ

### 2. ุงุฎุชูุงุฑ ุฃููุงุน ุงููุณุงุฆุท

#### ุงูุตูุฑ
- โ **ููุนู ุงูุชุฑุงุถูุงู**
- ูุฏุนู: JPG, PNG, WebP, BMP
- ูุชู ุชุทุจูู ุงูุนูุงูุฉ ุงููุงุฆูุฉ ุชููุงุฆูุงู

#### ุงูููุฏูููุงุช
- โ **ููุนู ุงูุชุฑุงุถูุงู**
- ูุฏุนู: MP4, AVI, MOV, MKV
- ูุชู ุถุบุท ุงูููุฏูู ุชููุงุฆูุงู

#### ุงููุณุชูุฏุงุช
- โ **ูุนุทู ุงูุชุฑุงุถูุงู**
- ูุฏุนู: ูููุงุช ุงูุตูุฑ ุงููุฑุณูุฉ ููุณุชูุฏุงุช
- ูููู ุชูุนููู ุญุณุจ ุงูุญุงุฌุฉ

### 3. ุฅุนุฏุงุฏุงุช ุงููุธูุฑ

#### ุงููููุน
- `ุฃุนูู ูุณุงุฑ` - ุฃุนูู ูุณุงุฑ ุงูุตูุฑุฉ
- `ุฃุนูู ูุณุท` - ุฃุนูู ูุณุท ุงูุตูุฑุฉ
- `ุฃุนูู ูููู` - ุฃุนูู ูููู ุงูุตูุฑุฉ
- `ุฃุณูู ูุณุงุฑ` - ุฃุณูู ูุณุงุฑ ุงูุตูุฑุฉ
- `ุฃุณูู ูุณุท` - ุฃุณูู ูุณุท ุงูุตูุฑุฉ
- `ุฃุณูู ูููู` - ุฃุณูู ูููู ุงูุตูุฑุฉ (ุงูุชุฑุงุถู)
- `ุงููุณุท` - ูุณุท ุงูุตูุฑุฉ

#### ุงูุญุฌู
- **ุงููุณุจุฉ ุงููุฆููุฉ**: 5% - 100%
- **ุงูุงูุชุฑุงุถู**: 20%
- **ุงูุญุฌู ุงูุฐูู**: ูุชููู ูุน ุฃุจุนุงุฏ ุงูุตูุฑุฉ

#### ุงูุดูุงููุฉ
- **ุงููุทุงู**: 10% - 100%
- **ุงูุงูุชุฑุงุถู**: 70%
- **100%**: ุดูุงู ุชูุงูุงู
- **10%**: ูุนุชู ุชูุงูุงู

#### ุงูุฅุฒุงุญุฉ
- **X**: -200 ุฅูู +200 ุจูุณู
- **Y**: -200 ุฅูู +200 ุจูุณู
- **ุงูุงูุชุฑุงุถู**: 0, 0

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ุงูุฐููุฉ
- **ุงูุญุฌู**: 100 ุนูุตุฑ ูุญุฏ ุฃูุตู
- **ุงูุชูุธูู**: ุชููุงุฆู ุนูุฏ ุงููุตูู ููุญุฏ
- **ุงูุฃุฏุงุก**: ูุนุงูุฌุฉ ุฃุณุฑุน ูููุณุงุฆุท ุงููุชูุฑุฑุฉ

### 2. ุถุบุท ุงูููุฏูู ุงููุญุณู
- **ุงูุญุฌู**: ุชูููู 40-60% ูู ุงูุญุฌู ุงูุฃุตูู
- **ุงูุฌูุฏุฉ**: ุงูุญูุงุธ ุนูู ุงูุฌูุฏุฉ ุงูุนุงููุฉ
- **ุงูุตูุบุฉ**: ุชุญููู ุชููุงุฆู ุฅูู MP4

### 3. ูุนุงูุฌุฉ ุงููุณุงุฆุท ูุฑุฉ ูุงุญุฏุฉ
- **ุงูููุงุกุฉ**: ูุนุงูุฌุฉ ูุฑุฉ ูุงุญุฏุฉ ููู ูููุฉ
- **ุงูููุงุฑุฏ**: ุชูููู ุงุณุชููุงู ุงูุฐุงูุฑุฉ
- **ุงูุณุฑุนุฉ**: ุชุญุณูู ููุช ุงูุงุณุชุฌุงุจุฉ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ ูุญููููุง

#### 1. ุงูุนูุงูุฉ ุงููุงุฆูุฉ ูุง ุชุทุจู
```bash
# ูุญุต ุงูุณุฌูุงุช
grep "watermark" bot.log

# ูุญุต ุงูุฅุนุฏุงุฏุงุช
# ุชุฃูุฏ ูู ุชูุนูู ุงูุนูุงูุฉ ุงููุงุฆูุฉ
# ุชุฃูุฏ ูู ุงุฎุชูุงุฑ ููุน ุงููุณุงุฆุท ุงูุตุญูุญ
```

#### 2. ุฃุฒุฑุงุฑ ูุง ุชุณุชุฌูุจ
```bash
# ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช
python3 main.py

# ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช
# ุชุฃูุฏ ูู ุตุญุฉ ุงูุฅุนุฏุงุฏุงุช
```

#### 3. ูุดุงูู ุงูููุฏูู
```bash
# ูุญุต FFmpeg
ffmpeg -version

# ูุญุต ุงูุตูุงุญูุงุช
ls -la watermark_images/
```

#### 4. ุญุฌู ุงูููุฏูู ูุจูุฑ
```bash
# ูุญุต ุฅุนุฏุงุฏุงุช ุงูุถุบุท
# ุชุฃูุฏ ูู ุชููุฑ FFmpeg
# ุฑุงุฌุน ุณุฌูุงุช ุงููุนุงูุฌุฉ
```

### ุฃูุงูุฑ ุงูุชุดุฎูุต

```bash
# ูุญุต ุญุงูุฉ ุงููุธุงู
python3 test_watermark.py

# ูุฑุงูุจุฉ ุงูุณุฌูุงุช
tail -f bot.log | grep "watermark"

# ูุญุต ุงููููุงุช
ls -la watermark_images/
ls -la temp/
```

## ุงูุฅุนุฏุงุฏุงุช ุงููุชูุฏูุฉ

### 1. ุชุฎุตูุต ุฅุนุฏุงุฏุงุช FFmpeg

```python
# ูู watermark_processor.py
self.default_video_quality = 'slow'  # ุฃุจุทุฃ = ุถุบุท ุฃูุถู
self.default_video_crf = 25          # 18-28 (ุฃูู = ุฌูุฏุฉ ุฃุนูู)
self.default_audio_bitrate = '96k'   # ูุนุฏู ุจุช ุงูุตูุช
```

### 2. ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ

```python
# ูู watermark_processor.py
self.cache_max_size = 150           # ุฒูุงุฏุฉ ุงูุญุฏ ุงูุฃูุตู
self.cache_cleanup_threshold = 120  # ููุทุฉ ุงูุชูุธูู
```

### 3. ุฅุนุฏุงุฏุงุช ุงูุฎุท

```python
# ุฅุถุงูุฉ ุฎุทูุท ุนุฑุจูุฉ
font_paths = [
    "/usr/share/fonts/truetype/arabic/",
    "/usr/share/fonts/truetype/dejavu/",
    "/usr/share/fonts/truetype/liberation/"
]
```

## ุงูุฃุฏุงุก ูุงูุชุญุณููุงุช

### 1. ุชุญุณููุงุช ุงูุฃุฏุงุก
- **ุณุฑุนุฉ ุงููุนุงูุฌุฉ**: 50-70% ุชุญุณู
- **ุงุณุชููุงู ุงูุฐุงูุฑุฉ**: 30-40% ุชูููู
- **ููุช ุงูุงุณุชุฌุงุจุฉ**: ุชุญุณู ููุญูุธ

### 2. ุชุญุณููุงุช ุงูุฌูุฏุฉ
- **ููุฏูููุงุช ุฃุตุบุฑ**: ุชูููู 40-60% ูู ุงูุญุฌู
- **ูุนุงููุฉ ุตุญูุญุฉ**: ุฅุตูุงุญ ูุดููุฉ ุงููุนุงููุฉ
- **ุฌูุฏุฉ ูุญุณูุฉ**: ุฅุนุฏุงุฏุงุช ุถุบุท ูุญุณูุฉ

### 3. ุชุญุณููุงุช ุงูููุซูููุฉ
- **ูุนุงูุฌุฉ ุฃุฎุทุงุก**: ุชูููู ุงูุฃุฎุทุงุก
- **ุฐุงูุฑุฉ ูุคูุชุฉ**: ุชูุธูู ุชููุงุฆู
- **ุณุฌูุงุช ููุตูุฉ**: ุชุดุฎูุต ุฃูุถู

## ุงูุฏุนู ูุงูุตูุงูุฉ

### 1. ุงููุฑุงูุจุฉ ุงููุณุชูุฑุฉ
```bash
# ูุฑุงูุจุฉ ุงูุฃุฏุงุก
python3 test_watermark.py

# ูุญุต ุงูุณุฌูุงุช
grep "error" bot.log

# ูุญุต ุงููุณุงุญุฉ
du -sh watermark_images/
```

### 2. ุงููุณุฎ ุงูุงุญุชูุงุทู
```bash
# ูุณุฎ ุงุญุชูุงุทู ููุฅุนุฏุงุฏุงุช
cp telegram_bot.db telegram_bot_backup.db

# ูุณุฎ ุงุญุชูุงุทู ููุตูุฑ
cp -r watermark_images/ watermark_images_backup/
```

### 3. ุงูุชุญุฏูุซุงุช
```bash
# ูุญุต ุงูุชุญุฏูุซุงุช
git pull origin main

# ุชุทุจูู ุงูุชุญุฏูุซุงุช
python3 test_watermark.py
```

## ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

### Q: ููุงุฐุง ูุง ุชุทุจู ุงูุนูุงูุฉ ุงููุงุฆูุฉ ุนูู ุงูุตูุฑุ
**A:** ุชุฃูุฏ ูู:
- ุชูุนูู ุงูุนูุงูุฉ ุงููุงุฆูุฉ
- ุงุฎุชูุงุฑ "ุงูุตูุฑ" ูู ุฃููุงุน ุงููุณุงุฆุท
- ุตุญุฉ ุฅุนุฏุงุฏุงุช ุงูุนูุงูุฉ ุงููุงุฆูุฉ

### Q: ููู ุฃุถุบุท ุงูููุฏูู ุฃูุซุฑุ
**A:** ููููู:
- ุชุบููุฑ `crf` ุฅูู ูููุฉ ุฃุนูู (ูุซู 28)
- ุงุณุชุฎุฏุงู `preset` ุฃุจุทุฃ (ูุซู `veryslow`)
- ุชูููู ูุนุฏู ุจุช ุงูุตูุช

### Q: ููุงุฐุง ุงูุฃุฒุฑุงุฑ ูุง ุชุณุชุฌูุจุ
**A:** ุชุญูู ูู:
- ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุนุงูุฌุฉ ุงูุฃุญุฏุงุซ
- ุฅุนุงุฏุฉ ุชุดุบูู ุงูุจูุช

### Q: ููู ุฃุญุณู ุงูุฃุฏุงุกุ
**A:** ููููู:
- ุฒูุงุฏุฉ ุญุฌู ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ
- ุงุณุชุฎุฏุงู FFmpeg
- ุชุญุณูู ุฅุนุฏุงุฏุงุช ุงูุถุบุท

---

**ููุงุญุธุฉ**: ูุฐู ุงูุฅุตูุงุญุงุช ูุชูุงููุฉ ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ ูุชุญุณู ุงูุฃุฏุงุก ุจุดูู ูุจูุฑ. ูู ุญุงูุฉ ูุฌูุฏ ุฃู ูุดุงููุ ุฑุงุฌุน ููู `WATERMARK_FIXES.md` ููุญุตูู ุนูู ุชูุงุตูู ุฃูุซุฑ.